<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>手机验证码登录</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    
    <div class = "main">
        <div class="error"></div>
        <div class = "top-title">信用钱包欢迎您</div>
        <div class = "main-style">
            <input type="text" class="mobile inp main-style-input" number placeholder="请输入手机号">
            <div class="cha fr">&Chi;</div>
        </div>
        <div class = "main-style fl">
            <div class= "verify-left fl">
                <input type="text" class="verify inp main-style-input" placeholder="请输入短信验证码">
            </div>
            <div class = "verify-right fr verify-bnt">获取验证码</div>
            <!-- <div class = "verify-right fr verify-bnt-count">剩余<span class = "count"></span>秒</div> -->
        </div>
        <div class="clean"></div>
        <div class="read">注册代表您同意 <a href="https://baidu.com" class="red">《信用钱包用户协商》</a></div>
        <div class = "btn">注册/登录</div>
        <div class="bottom fr"><a href="passwordLogin.html">密码登录</a></div>
    </div>
</body>
<script src="js/common.js"></script>
<script>
    let mobile = document.querySelector(".mobile");
    let cha = document.getElementsByClassName('cha')[0];
    let error = document.querySelector(".error");
    let verify = document.getElementsByClassName('verify')[0];
    let verifyBnt = document.querySelector('.verify-bnt');
    // let submit = document.querySelector('.btn');

    // 手机校对 11位数字
    var mReg = /^[1][3,4,5,7,8][0-9]{9}$/;
    // 验证码 4位或者6位数字
    var vReg = /^(\d{4}$)|(^\d{6}$)/;
    //添加事件方法二：onElemt的用法；
    verify.onblur = function(){
        if(verify.value == undefined || verify.value == null || verify.vReg == ""){
            return
        }else if(!vReg.test(verify.value)){
            hint(error,"短信验证码格式错误")
            return 
        } 
    }
    // 添加事件方法三：在html中添加onElemt = "functionName()"
    verifyBnt.onclick = function(){
        if(mobile.value == null || mobile.value == undefined || mobile.value == ""){
            hint(error,"请输入11位手机号")
            return
        }else if(!mReg.test(mobile.value)){
            hint(error,"手机号格式错误")
            return 
        } 
        countDown()
    }
    // 验证码倒计时（60）秒
    var count = 60
    //60秒倒计时
    function countDown(){ 
            if(count==0){
                verifyBnt.innerHTML = "获取验证码"
                count = 60
                return
            }else{
                verifyBnt.innerHTML = "剩余"+ count+"秒"
                count--
            }
            setTimeout(function(){
                countDown()
            },1000);
        }
    // 提示
    function hint(error,content){
        error.style.display = "block"
        error.innerHTML = content
    }
</script>
</html>